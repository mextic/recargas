# =====================================================
# CONFIGURACIÓN DE ALERTAS - FASE 5
# Sistema de Alertas Multi-Canal Configurable
# =====================================================

# ===== CONFIGURACIÓN GENERAL =====
TIMEZONE=America/Mazatlan

# URL del dashboard (usado en botones y enlaces)
DASHBOARD_URL=http://localhost:3000

# ===== SLACK ALERTS =====
# Habilitar canal de Slack (true/false)
ALERT_SLACK_ENABLED=false

# Webhook URL de Slack (Incoming Webhooks)
# Ejemplo: https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX
ALERT_SLACK_WEBHOOK=

# Canal donde enviar las alertas
ALERT_SLACK_CHANNEL=#alerts

# Configuración del bot
ALERT_SLACK_USERNAME=Recargas Bot
ALERT_SLACK_ICON=:warning:

# Destinatarios por prioridad (separados por comas)
# CRITICAL: @channel notifica a todo el canal
# HIGH: @here notifica solo a usuarios activos
# MEDIUM y LOW: usuarios específicos o grupos
ALERT_SLACK_CRITICAL_USERS=@channel
ALERT_SLACK_HIGH_USERS=@here,@admin
ALERT_SLACK_MEDIUM_USERS=@devops,@sysadmin
ALERT_SLACK_LOW_USERS=

# ===== EMAIL ALERTS =====
# Habilitar canal de Email (true/false)
ALERT_EMAIL_ENABLED=false

# Configuración SMTP
ALERT_EMAIL_SMTP_HOST=smtp.gmail.com
ALERT_EMAIL_SMTP_PORT=587
ALERT_EMAIL_SMTP_SECURE=false

# Credenciales SMTP
ALERT_EMAIL_USER=alerts@company.com
ALERT_EMAIL_PASS=secure_app_password

# Remitente de los emails
ALERT_EMAIL_FROM=Sistema Recargas <noreply@company.com>

# Destinatarios por prioridad (separados por comas)
ALERT_EMAIL_CRITICAL=admin@company.com,cto@company.com
ALERT_EMAIL_HIGH=admin@company.com,devops@company.com
ALERT_EMAIL_MEDIUM=devops@company.com,support@company.com
ALERT_EMAIL_LOW=support@company.com

# ===== TELEGRAM ALERTS =====
# Habilitar canal de Telegram (true/false)
ALERT_TELEGRAM_ENABLED=false

# Token del bot de Telegram
# Crear bot con @BotFather y obtener token
ALERT_TELEGRAM_BOT_TOKEN=

# Chat IDs por prioridad (separados por comas)
# Para obtener chat ID:
# 1. Agregar bot al grupo/chat
# 2. Enviar mensaje al bot
# 3. Visitar: https://api.telegram.org/bot<TOKEN>/getUpdates
# 4. Buscar "chat":{"id":-xxxxxxxxx

# Chat IDs para alertas críticas (múltiples permitidos)
ALERT_TELEGRAM_CRITICAL_CHATS=-1001234567890,-1009876543210

# Chat IDs para alertas altas
ALERT_TELEGRAM_HIGH_CHATS=-1001234567890

# Chat IDs para alertas medias
ALERT_TELEGRAM_MEDIUM_CHATS=-1001234567890

# Chat IDs para alertas bajas (útil para testing)
ALERT_TELEGRAM_LOW_CHATS=-1001234567890

# ===== WEBHOOK ALERTS =====
# Habilitar canal de Webhook (true/false)
ALERT_WEBHOOK_ENABLED=false

# URLs de webhook por prioridad (separadas por comas)
# Soporte para PagerDuty, OpsGenie, Microsoft Teams, etc.

# Webhooks para alertas críticas
ALERT_WEBHOOK_CRITICAL_URLS=https://events.pagerduty.com/integration/xxx/enqueue,https://api.opsgenie.com/v1/json/alerts

# Webhooks para alertas altas
ALERT_WEBHOOK_HIGH_URLS=https://api.opsgenie.com/v1/json/alerts

# Webhooks para alertas medias
ALERT_WEBHOOK_MEDIUM_URLS=

# Webhooks para alertas bajas (útil para testing)
ALERT_WEBHOOK_LOW_URLS=https://webhook.site/unique-id

# Headers de autenticación para webhooks
ALERT_WEBHOOK_AUTH_HEADER=Bearer your_token_here
ALERT_WEBHOOK_API_KEY=your_api_key_here

# Timeout para webhooks (milisegundos)
ALERT_WEBHOOK_TIMEOUT=5000

# ===== CONFIGURACIÓN DE THROTTLING =====
# Control de spam - tiempo mínimo entre alertas del mismo tipo (milisegundos)

# Alertas críticas: 1 minuto mínimo
ALERT_THROTTLE_CRITICAL=60000

# Alertas altas: 5 minutos mínimo
ALERT_THROTTLE_HIGH=300000

# Alertas medias: 15 minutos mínimo
ALERT_THROTTLE_MEDIUM=900000

# Alertas bajas: 1 hora mínimo
ALERT_THROTTLE_LOW=3600000

# ===== CONFIGURACIÓN DE ESCALACIÓN =====
# Escalación automática si no se resuelve la alerta

# Habilitar escalación automática (true/false)
ALERT_ESCALATION_ENABLED=false

# Tiempo para escalar alertas críticas (milisegundos)
ALERT_ESCALATION_CRITICAL=300000

# Tiempo para escalar alertas altas (milisegundos)
ALERT_ESCALATION_HIGH=900000

# Tiempo para escalar alertas medias (milisegundos)
ALERT_ESCALATION_MEDIUM=1800000

# ===== CONFIGURACIÓN DE RETRY =====
# Reintentos para canales que fallan

# Número máximo de reintentos
ALERT_RETRY_MAX=3

# Delay inicial entre reintentos (milisegundos)
ALERT_RETRY_DELAY=5000

# Multiplicador de backoff exponencial
ALERT_RETRY_BACKOFF=1.5

# =====================================================
# EJEMPLOS DE CONFIGURACIÓN POR AMBIENTE
# =====================================================

# === DESARROLLO ===
# ALERT_SLACK_ENABLED=true
# ALERT_SLACK_WEBHOOK=https://hooks.slack.com/services/T00000000/B00000000/dev_webhook
# ALERT_SLACK_CHANNEL=#dev-alerts
# ALERT_EMAIL_ENABLED=false
# ALERT_TELEGRAM_ENABLED=false
# ALERT_WEBHOOK_ENABLED=false

# === STAGING ===
# ALERT_SLACK_ENABLED=true
# ALERT_EMAIL_ENABLED=true
# ALERT_TELEGRAM_ENABLED=false
# ALERT_WEBHOOK_ENABLED=false

# === PRODUCCIÓN ===
# ALERT_SLACK_ENABLED=true
# ALERT_EMAIL_ENABLED=true
# ALERT_TELEGRAM_ENABLED=true
# ALERT_WEBHOOK_ENABLED=true

# =====================================================
# NOTAS IMPORTANTES
# =====================================================

# 1. SEGURIDAD:
#    - Nunca commitear este archivo con credenciales reales
#    - Usar variables de entorno del servidor en producción
#    - Rotar tokens y passwords regularmente

# 2. TESTING:
#    - Usar prioridad LOW para pruebas
#    - Configurar webhooks de test (webhook.site)
#    - Probar cada canal individualmente

# 3. CHANNELS:
#    - Slack: Más rápido para equipos técnicos
#    - Email: Ideal para management y stakeholders
#    - Telegram: Alertas móviles 24/7
#    - Webhook: Integración con sistemas externos

# 4. PRIORIDADES:
#    - CRITICAL: Sistema caído, datos perdidos
#    - HIGH: Degradación severa, SLA en riesgo
#    - MEDIUM: Warnings, performance issues
#    - LOW: Info, testing, mantenimiento

# 5. TROUBLESHOOTING:
#    - Verificar conectividad de red
#    - Validar credenciales y tokens
#    - Revisar logs del sistema
#    - Usar scripts de testing individuales